<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Firebase Menu Importer</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f4f4f9; color: #333; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .container { text-align: center; background: white; padding: 40px; border-radius: 12px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); max-width: 90%; }
        h1 { color: #3E2723; }
        p { color: #666; max-width: 500px; margin: 15px auto; }
        button { background: #8B4513; color: white; border: none; padding: 15px 30px; font-size: 1rem; border-radius: 8px; cursor: pointer; transition: background 0.3s ease; }
        button:hover { background: #A0522D; }
        button:disabled { background: #ccc; cursor: not-allowed; }
        #log { margin-top: 20px; font-family: monospace; font-size: 0.9rem; color: #4CAF50; text-align: left; background: #f1f1f1; padding: 10px; border-radius: 5px; max-height: 150px; overflow-y: auto;}
        .instructions { border: 1px solid #ddd; padding: 15px; margin-bottom: 20px; border-radius: 8px; background-color: #fafafa; text-align: left;}
        code { background: #eee; padding: 2px 5px; border-radius: 3px; font-family: monospace; }
    </style>
</head>
<body>

    <div class="container">
        <h1>ðŸš€ Importer Menu Payboss Cafe</h1>
        
        <div class="instructions">
            <strong>PENTING: Lakukan ini terlebih dahulu!</strong>
            <ol>
                <li>Buka Konsol Firebase > Firestore Database > Tab <strong>Rules</strong>.</li>
                <li>Ganti semua isinya dengan kode di bawah ini untuk mengizinkan proses import:</li>
            </ol>
            <pre><code>rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}</code></pre>
            <p>Setelah selesai import, aturan ini bisa dibuat lebih aman.</p>
        </div>

        <p>Pastikan Anda sudah menghapus collection 'menu' yang lama untuk menghindari data ganda. Klik tombol di bawah untuk memulai proses import otomatis.</p>
        <button id="importButton">Import Semua Menu ke Firebase</button>
        <div id="log"></div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, collection, doc, writeBatch } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        const firebaseConfig = {
          apiKey: "AIzaSyB0nHqdAw_dV9pHcQ_cSnWtNsn4CwwwUNc",
          authDomain: "payboss-cafe-system.firebaseapp.com",
          projectId: "payboss-cafe-system",
          storageBucket: "payboss-cafe-system.appspot.com",
          messagingSenderId: "570523503793",
          appId: "1:570523503793:web:0a7ba7ce751eb95a3f6690",
          measurementId: "G-H1NJ369HE9"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- SEMUA DATA MENU ANDA ADA DI SINI ---
        const menuToImport = [
             // A. Makanan Ringan / Snack
            { name: "Mix Vegetable PayBoss", description: "Pisang goreng, singkong, bakwan, tempe mendoan, jagung", price: 25000, category: "snacks" },
            { name: "Mix Platter", description: "Kentang goreng, nugget, sosis, otak-otak, kulit ayam", price: 30000, category: "snacks" },
            { name: "Kentang Goreng", description: "", price: 15000, category: "snacks" },
            { name: "Cireng Isi", description: "Pilihan isi: ayam suwir / pentol pedas / keju", price: 18000, category: "snacks", variants: "Ayam Suwir, Pentol Pedas, Keju" },
            { name: "Cireng Bumbu Rujak", description: "", price: 16000, category: "snacks" },
            { name: "Singkong Rekah", description: "", price: 12000, category: "snacks" },
            { name: "Pisang Kipas", description: "", price: 15000, category: "snacks" },
            { name: "Tempe Mendoan", description: "", price: 12000, category: "snacks" },
            { name: "Tahu Cabe Garam", description: "", price: 16000, category: "snacks" },
            { name: "Tahu Bakso", description: "", price: 16000, category: "snacks" },
            { name: "Kulit Ayam Crispy", description: "", price: 18000, category: "snacks" },
            { name: "Jamur Crispy", description: "", price: 16000, category: "snacks" },
            { name: "Sotong Goreng", description: "Camilan cumi", price: 20000, category: "snacks" },
            { name: "Risol Mayo", description: "", price: 14000, category: "snacks" },
            { name: "Dimsum Keju Lumer", description: "", price: 22000, category: "snacks" },
            { name: "Mini Wonton Crispy", description: "", price: 18000, category: "snacks" },
            { name: "Dimsum", description: "Pilihan: seafood / ayam / sapi", price: 20000, category: "snacks", variants: "Seafood, Ayam, Sapi" },
            { name: "Pepperoni Pizza Spring Roll", description: "", price: 22000, category: "snacks" },
            { name: "Corn Ribs", description: "Pilihan: Spicy / Original", price: 18000, category: "snacks", variants: "Spicy, Original" },
            { name: "Pempek", description: "", price: 18000, category: "snacks" },
            
            // Roti & Pastry Manis
            { name: "Donat", description: "Original + topping", price: 8000, category: "pastry", variants: "Cokelat, Keju, Gula" },
            { name: "Toast", description: "", price: 15000, category: "pastry", variants: "Matcha, French Toast, Cokelat, Kacang" },
            { name: "Croissant", description: "", price: 18000, category: "pastry", variants: "Butter, Almond, Cokelat, Vanilla" },
            { name: "Roti Goreng", description: "", price: 10000, category: "pastry" },
            { name: "Bakpao", description: "Pilihan: seafood / ayam / sapi", price: 12000, category: "pastry", variants: "Seafood, Ayam, Sapi" },
            { name: "Kacang Bergula", description: "Peanuts caramelized", price: 10000, category: "pastry" },

            // B. Makanan Berat
            { name: "Nasi Goreng", description: "", price: 25000, category: "main", variants: "Bumbu Rendang, Bumbu Rawon, Bumbu Soto" },
            { name: "Mie Goreng", description: "", price: 25000, category: "main", variants: "Seafood, Ayam, Sapi" },
            { name: "Mie Godog", description: "", price: 25000, category: "main", variants: "Seafood, Ayam, Sapi" },
            { name: "Mie Ayam", description: "", price: 20000, category: "main", variants: "Original, Bakso, Jamur" },
            { name: "Sup", description: "", price: 22000, category: "main", variants: "Seafood, Ayam, Sapi" },

            // C. Minuman â€“ Coffee
            { name: "Americano", description: "", price: 15000, category: "coffee", variants: "Original, Orange, Peach, Honey, Berry" },
            { name: "Kopi Susu (Kopsus)", description: "", price: 18000, category: "coffee", variants: "Aren, Vanilla, Mocca, Macchiato, Latte, Cappuccino" },

            // D. Minuman â€“ Non-Coffee
            { name: "Yakult Berry", description: "", price: 15000, category: "non-coffee" },
            { name: "Cincau", description: "", price: 10000, category: "non-coffee" },
            { name: "Sarang Burung Walet", description: "", price: 25000, category: "non-coffee" },
            { name: "Teh", description: "", price: 8000, category: "non-coffee", variants: "Original, Lemon, Apple, Susu" },
            { name: "Sup Buah", description: "", price: 18000, category: "non-coffee" },
            { name: "Air Kelapa", description: "", price: 12000, category: "non-coffee", variants: "Original, Susu, Kopi" }
        ];

        const importButton = document.getElementById('importButton');
        const logDiv = document.getElementById('log');

        importButton.addEventListener('click', async () => {
            importButton.disabled = true;
            importButton.textContent = 'Mengimport...';
            logDiv.innerHTML = '';

            try {
                const batch = writeBatch(db);
                const menuRef = collection(db, "menu");

                menuToImport.forEach((item) => {
                    const docRef = doc(menuRef); // Membuat referensi dokumen baru
                    batch.set(docRef, item);
                    logDiv.innerHTML += `Menyiapkan ${item.name}...<br>`;
                });
                
                await batch.commit(); // Mengirim semua data sekaligus

                logDiv.innerHTML += '<br><strong>BERHASIL!</strong> Semua menu telah ditambahkan ke Firebase.';
                importButton.textContent = 'Import Selesai';

            } catch (error) {
                console.error("Error during import: ", error);
                logDiv.innerHTML = `<strong>GAGAL!</strong> Terjadi kesalahan. Cek console (F12) untuk detail.`;
                importButton.textContent = 'Coba Lagi';
                importButton.disabled = false;
            }
        });
    </script>

</body>
</html>

